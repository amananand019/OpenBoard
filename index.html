<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      body {
        margin: 0;
      }

      .fas {
        font-size: 2rem;
        margin-right: 30px;
        margin-left: 30px;
      }
    </style>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    />
  </head>
  <body>
    <!-- <h1>Canvas Example</h1> -->
    <!-- These are font awesome icons -->
    <i class="fas fa-square"></i>
    <i class="fas fa-grip-lines-vertical"></i>
    <!-- drawing board -->
    <canvas></canvas>
  </body>
  <!-- html js inject -->
  <script>
    let canvasBoard = document.querySelector("canvas");
    // default height and width is smaller
    // canvasBoard.height = "100";
    canvasBoard.height = window.innerHeight;
    canvasBoard.width = window.innerWidth;

    //font awesome icon selector
    let rectTool = document.querySelector(".fa-square");
    let lineTool = document.querySelector(".fa-grip-lines-vertical");
    let cTool = "rectTool";

    let body = document.querySelector("body");
    //this line gives us the tool to draw on that canvas
    let tool = canvasBoard.getContext("2d");
    //rectangle build
    tool.fillStyle = "purple";
    //makes an area filled with color
    // tool.fillRect(0, 0, 500, 200);
    //makes an area will a border
    // tool.strokeRect(50, 50, 500, 200);

    //tool change logic
    rectTool.addEventListener("click", () => {
      cTool = "rectTool";
    });
    lineTool.addEventListener("click", () => {
      cTool = "lineTool";
    });

    let boardTop = canvasBoard.getBoundingClientRect().top;
    let boardLeft = canvasBoard.getBoundingClientRect().left;
    let ix, iy, fx, fy;
    body.addEventListener("mousedown", (e) => {
      console.log(e);
      //   let xPos = e.clientX;
      //   let yPos = e.clientY;
      ix = e.clientX;
      iy = e.clientY - boardTop;
      console.log(xPos, yPos);
    });

    body.addEventListener("mouseup", (e) => {
      console.log(e);
      //   let xPos = e.clientX;
      //   let yPos = e.clientY;
      fx = e.clientX + boardLeft;
      fy = e.clientY - boardTop;

      let width = fx - ix;
      let height = fy - iy;

      if (cTool == "rectTool") {
        tool.strokeRect(ix, iy, width, height);
      } else {
        tool.beginPath();
        tool.moveTo(ix, iy);
        tool.lineTo(fx, fy);
        tool.stroke();
      }
      //   tool.strokeRect(ix, iy, fx - ix, fy - iy);
      console.log(xPos, yPos);
    });
  </script>
</html>
